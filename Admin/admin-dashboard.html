<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Mobi.Comm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="adminstyles.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <!-- Brand Name -->
            <a class="navbar-brand" href="#" onclick="showPage('dashboard')">Mobi.Comm</a>

            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('dashboard')">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('subscribers')">Subscribers List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('recharge-history')">Transaction History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('plans')">Plans</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('notifications')">Notifications</a>
                    </li>
                </ul>
            </div>

            <!-- Notification Icon -->
            <div class="notification-icon" onclick="showPage('notification')">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notifBadge">3</span>
            </div>

            <!-- Avatar Dropdown -->
            <div class="dropdown">
                <div class="avatar-icon" data-bs-toggle="dropdown" aria-expanded="false">
                    <img id="navbarAvatar" src="Images/profile.jpeg" alt="Avatar" class="rounded-circle" width="40"
                        height="40">
                </div>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#" onclick="showPage('profile')">Profile</a></li>
                    <li><a class="dropdown-item" href="#" onclick="showPage('reportAndAnalysis')">Report & Analysis</a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item text-danger" href="admin-login.html"
                            onclick="confirmLogout()">Logout</a></li>
                </ul>
            </div>

            <!-- Navbar Toggle Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>


    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section">
            <h2 class="text-center mb-4">Dashboard</h2>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Total Subscribers</div>
                        <div class="card-body">
                            <p id="totalSubscribers"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Active Plans</div>
                        <div class="card-body">
                            <p id="activePlans"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Expiring Subscribers Count</div>
                        <div class="card-body">
                            <p id="expiringPlans"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Revenue Generated</div>
                        <div class="card-body">
                            <p id="totalRevenue"><b>₹0</b></p>
                        </div>
                    </div>
                </div>
            </div>

            <h4 class="mt-4" style="text-align: center; margin-bottom: 20px;">Expiring Plans in 3 Days</h4>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Plan</th>
                            <th>Price(₹)</th>
                            <th>Validity</th>
                            <th>Recharge Date</th>
                            <th>Expiry Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="expiringSubscribersTable">
                        <!-- Data will be inserted dynamically -->
                    </tbody>
                </table>
            </div>
            <!-- Bootstrap Pagination -->
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center" id="pagination">
                    <!-- Pagination will be generated dynamically here -->
                </ul>
            </nav>
            <!-- Notify Modal -->
            <div class="modal fade" id="notifyModal" tabindex="-1" aria-labelledby="notifyModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="notifyModalLabel">Plan Expiry Notification</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p><strong>Name:</strong> <span id="notifyUserName"></span></p>
                            <p><strong>Phone:</strong> <span id="notifyUserPhone"></span></p>
                            <p>User has been notified about their plan expiry.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subscriber Management Section -->
        <div id="subscribers" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Subscriber Management</h2>

            <!-- Search Bar -->
            <div class="search-bar position-relative mb-3">
                <input type="text" class="form-control ps-5" id="searchSubscribers"
                    placeholder="Search Subscribers by Name or Mobile Number" onkeyup="filterSubscribers()">
                <i class="fas fa-search position-absolute text-muted"
                    style="top: 50%; left: 15px; transform: translateY(-50%);"></i>
            </div>

            <!-- Card for Pending Subscribers -->
            <div class="card">
                <div class="card-header">
                    <h5 class="text-center">Pending Subscribers</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Mobile No.</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="subscriber-list">
                                <!-- Data will be dynamically injected here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Bootstrap Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination0">
                            <!-- Pagination will be generated dynamically -->
                        </ul>
                    </nav>

                    <!-- Export Buttons -->
                    <div class="text-center mt-3">
                        <button class="btn btn-warning me-2" onclick="exportSubscribersToCSV()">Export to CSV</button>
                        <button class="btn btn-warning" onclick="exportSubscribersToPDF()">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050;"></div>

        <div class="modal fade" id="confirmationModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Action</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p id="confirmText"></p>
                        <p><strong>Name:</strong> <span id="modalSubscriberName"></span></p>
                        <p><strong>Mobile:</strong> <span id="modalSubscriberMobile"></span></p>
                        <p><strong>Email:</strong> <span id="modalSubscriberEmail"></span></p>
                        <p><strong>Status:</strong> <span id="modalSubscriberStatus"></span></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button id="confirmActionBtn" class="btn">Confirm</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transaction History Section -->
        <div id="recharge-history" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Transaction History</h2>

            <!-- Search Bar -->
            <div class="search-bar position-relative mb-3">
                <input type="text" class="form-control ps-5" id="searchTransactions"
                    placeholder="Search by Name or Mobile" onkeyup="filterTransactions()">
                <i class="fas fa-search position-absolute text-muted"
                    style="top: 50%; left: 15px; transform: translateY(-50%);"></i>
            </div>

            <!-- Transaction Table -->
            <div class="card">
                <div class="card-header">
                    <h5 class="text-center">Recharge Transactions</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Transaction ID</th>
                                    <th>Recharge Date</th>
                                    <th>Username</th>
                                    <th>Mobile No.</th>
                                    <th>Plan Name</th>
                                    <th>Plan Price</th>
                                    <th>Validity</th>
                                    <th>Payment Mode</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="transaction-list">
                                <!-- Transactions will be injected dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination5">
                            <!-- Pagination will be generated dynamically -->
                        </ul>
                    </nav>

                    <!-- Export Buttons -->
                    <div class="text-center mt-3">
                        <button class="btn btn-warning me-2" onclick="exportTransactionsToCSV()">Export to CSV</button>
                        <button class="btn btn-warning" onclick="exportTransactionsToPDF()">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>




        <!-- Plan Management -->
        <div id="plans" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Plan Management</h2>

            <!-- Filters -->
            <div class="row g-4">
                <div class="col-md-3">
                    <input type="text" id="search-plan-name" class="form-control" placeholder="Search by Plan Name"
                        oninput="applyFilters()">
                </div>
                <div class="col-md-3">
                    <select id="filter-price" class="form-control" onchange="applyFilters()">
                        <option value="" selected>-- Order by Price --</option>
                        <option value="low-to-high">Price Low to High</option>
                        <option value="high-to-low">Price High to Low</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select id="filter-status" class="form-control" onchange="applyFilters()">
                        <option value="" selected>-- Select Status --</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="col-md-3 d-flex">
                    <button class="btn btn-secondary me-2" onclick="clearFilters()">Clear Filters</button>
                    <button class="btn btn-primary w-50" data-bs-toggle="modal" data-bs-target="#addPlanModal"
                        onclick="openAddPlanModal()">+ Add New Plan</button>
                </div>
            </div>

            <!-- Plans Table -->
            <div class="card mt-4">
                <div class="card-header text-center">
                    <h5>Plans</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover" id="plans-table">
                            <thead>
                                <tr>
                                    <th>Plan Name</th>
                                    <th>Price (₹)</th>
                                    <th>Validity</th>
                                    <th>Data Limit</th>
                                    <th>SMS Limit</th>
                                    <th>Call Limit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic Plan Rows Here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination2">
                            <!-- Pagination will be generated dynamically here -->
                        </ul>
                    </nav>

                    <!-- Export Buttons -->
                    <div class="d-flex justify-content-center mt-4">
                        <button class="btn btn-warning mx-2" onclick="exportPlans()">Export to CSV</button>
                        <button class="btn btn-warning mx-2" onclick="exportPlanPDF()">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Adding/Editing Plans -->
        <div class="modal fade" id="addPlanModal" tabindex="-1" aria-labelledby="addPlanModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addPlanModalLabel">Add/Edit Plan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="plan-form" onsubmit="handleFormSubmit(event)">
                            <div class="mb-3">
                                <label for="plan-name" class="form-label">Plan Name</label>
                                <input type="text" class="form-control" id="plan-name" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-price" class="form-label">Price</label>
                                <input type="number" class="form-control" id="plan-price" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-validity" class="form-label">Validity</label>
                                <input type="text" class="form-control" id="plan-validity" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-data-limit" class="form-label">Data Limit</label>
                                <input type="text" class="form-control" id="plan-data-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-sms-limit" class="form-label">SMS Limit</label>
                                <input type="text" class="form-control" id="plan-sms-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-call-limit" class="form-label">Call Limit</label>
                                <input type="text" class="form-control" id="plan-call-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-status" class="form-label">Status</label>
                                <select class="form-control" id="plan-status" required>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Save Plan</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Deleting/Deactivating Plans -->
        <div class="modal fade" id="deletePlanModal" tabindex="-1" aria-labelledby="deletePlanModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deletePlanModalLabel">Confirm Action</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>What would you like to do with this plan?</p>
                        <p><strong>Plan Name:</strong> <span id="delete-plan-name"></span></p>
                        <div id="delete-plan-details"></div> <!-- Plan details will be displayed here -->
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" onclick="confirmDeletePlan()">Delete</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Requset from user-->
        <div id="notification" class="content-section" style="display: none;">
            <h3 class="text-center mb-4 text-primary">Request From User</h3>
            <div class="container mt-4">
                <!-- Filter by Status -->
                <div class="mb-3 text-center">
                    <label for="filterStatus" class="fw-bold me-2">Filter by Status:</label>
                    <select id="filterStatus" class="form-select d-inline-block w-auto">
                        <option value="all">All</option>
                        <option value="Pending">Pending</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Resolved">Resolved</option>
                    </select>
                </div>
                
            
                <!-- Notification List -->
                <div id="notificationList"></div>
            </div>
            
        </div>

        <!-- Notification Management -->
        <div id="notifications" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Notification Management</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header text-center">
                            <h5>Send a Notification</h5>
                        </div>
                        <div class="card-body">
                            <form id="notificationForm">
                                <div class="mb-3">
                                    <label for="notificationType" class="form-label">Notification Type</label>
                                    <select id="notificationType" class="form-control">
                                        <option value="single">Single Subscriber</option>
                                        <!-- <option value="group">Group of Subscribers</option> -->
                                        <option value="all">All Subscribers</option>
                                    </select>
                                </div>
                                <div class="mb-3" id="subscriberSelection">
                                    <label for="subscriberSelect" class="form-label">Select Subscriber</label>
                                    <input type="text" id="subscriberSelect" class="form-control"
                                        placeholder="Search Subscriber" list="subscriberList" autocomplete="off"
                                        required>
                                    <datalist id="subscriberList"></datalist>
                                </div>
                                <div class="mb-3" id="groupSelection" style="display: none;">
                                    <label for="groupSelect" class="form-label">Select Group</label>
                                    <select id="groupSelect" class="form-control">
                                        <option value="unlimited">Unlimited Plan</option>
                                        <option value="basic">Basic Plan</option>
                                        <option value="basic">Data Booster Plan</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="messageContent" class="form-label">Message Content</label>
                                    <textarea id="messageContent" class="form-control" rows="4"
                                        placeholder="Enter custom message" required></textarea>
                                    <span id="errorMessage" style="color: red; font-size: 14px;"></span>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Send Notification</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header text-center">
                            <h5>Notification History</h5>
                        </div>
                        <div class="card-body">
                            <input type="text" id="searchInput" class="form-control mb-3"
                                placeholder="Search by Status">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Number</th>
                                            <th>Date & Time</th>
                                            <th>Message</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="notificationHistoryList"></tbody>
                                </table>
                            </div>
                            <nav aria-label="Page navigation">
                                <ul class="pagination justify-content-center" id="pagination3"></ul>
                            </nav>
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-secondary me-2" id="downloadedHistory">📥 Download History</button>
                                <button class="btn btn-danger" id="clearHistory">🗑 Clear History</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            document.getElementById("notificationType").addEventListener("change", function () {
                let type = this.value;
                document.getElementById("subscriberSelection").style.display = type === "single" ? "block" : "none";
                document.getElementById("groupSelection").style.display = type === "group" ? "block" : "none";
            });
        </script>

        <!-- Confirmation Modal for Delete & Resend -->
        <div class="modal fade" id="notificationConfirmationModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Action</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body" id="notificationModalBody"></div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-primary" id="notificationConfirmAction">Yes, Proceed</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Notifications Modal -->
        <div class="modal fade" id="notificationNoDataModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">No Data</h5>
                    </div>
                    <div class="modal-body">No notifications to download!</div>
                    <div class="modal-footer"><button class="btn btn-primary" data-bs-dismiss="modal">OK</button></div>
                </div>
            </div>
        </div>

        <!-- Clear History Confirmation Modal -->
        <div class="modal fade" id="clearHistoryModal" tabindex="-1" aria-labelledby="clearHistoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="clearHistoryModalLabel">Confirm Clear History</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to clear all notification history? This action cannot be undone.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmClearHistory">Clear History</button>
                    </div>
                </div>
            </div>
        </div>





        <!-- Report & Analytics -->
<div id="reportAndAnalysis" class="content-section" style="display: none;">
    <h2 class="text-center">Reports & Analytics</h2>

    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-header">Total revenue</div>
                <div class="card-body">
                    <p id="totalRevenue"><b>0 (This Month)</b></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-header">Total Recharge</div>
                <div class="card-body">
                    <p id="totalRecharge"><b>0 (This Month)</b></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-header">New Subscribers</div>
                <div class="card-body">
                    <p id="newSubscribers"><b>0 (This Month)</b></p>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <!-- Revenue Overview -->
        <div class="col-md-12">
            <div class="row align-items-stretch" id="revenueSection">
                <div class="col-md-4">
                    <div class="card text-center h-100">
                        <div class="chart-container">
                            <div class="card-header">Revenue Overview</div>
                            <div class="card-body">
                                <canvas id="revenueChart" style="max-width: 100%; height: auto;"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">Revenue Overview</div>
                        <div class="card-body">
                            <p>The total revenue generated this month has been stable, showing consistent growth.</p>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-3 col-md-2">
                    <button class="btn btn-primary downloadBtn"
                        onclick="generatePDF('revenueSection', 'Revenue_Report.pdf')">Download</button>
                </div>
            </div>
        </div>

    
            <!-- Daily Recharge -->
            <div class="col-md-12 mt-3">
                <div class="row align-items-stretch" id="rechargeSection">
                    <div class="col-md-4">
                        <div class="card text-center h-100">
                            <div class="chart-container">
                                <div class="card-header">Daily Recharge</div>
                                <div class="card-body">
                                    <canvas id="dailyRechargeChart" style="max-width: 100%; height: auto;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">Recharge Insights</div>
                            <div class="card-body">
                                <p>Recharge activity remains steady, with daily trends indicating a preference for
                                    long-term plans.
                                    A specific recharge plan has been the most popular among subscribers.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-3 col-md-2">
                        <button class="btn btn-primary downloadBtn"
                            onclick="generatePDF('rechargeSection', 'Recharge_Report.pdf')">Download</button>
                    </div>
                </div>

            </div>

            <!-- Recharge Plan Popularity -->
            <div class="col-md-12 mt-3">
                <div class="row align-items-stretch" id="planSection">
                    <div class="col-md-4">
                        <div class="card text-center h-100">
                            <div class="chart-container">
                                <div class="card-header">Recharge Plan Popularity</div>
                                <div class="card-body">
                                    <canvas id="rechargePlanChart" style="max-width: 100%; height: auto;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">Subscriber Activity</div>
                            <div class="card-body">
                                <p>New subscribers are joining the platform regularly. The majority of users prefer
                                    a
                                    particular plan, and a few subscriptions are nearing expiry soon.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-3 col-md-2">
                        <button class="btn btn-primary downloadBtn"
                            onclick="generatePDF('planSection', 'Plan_Report.pdf')">Download</button>
                    </div>
                </div>

            </div>

            <!-- Payment Mode Usage -->
            <div class="col-md-12 mt-3">
                <div class="row align-items-stretch" id="paymentSection">
                    <div class="col-md-4">
                        <div class="card text-center h-100">
                            <div class="chart-container">
                                <div class="card-header">Payment Mode Usage</div>
                                <div class="card-body">
                                    <canvas id="paymentModeChart" style="max-width: 100%; height: auto;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">Payment Mode Analysis</div>
                            <div class="card-body">
                                <p>Subscribers primarily use digital payment methods, with a strong preference for
                                    credit cards
                                    and UPI. Alternative methods like net banking and wallets also contribute
                                    significantly.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-3 col-md-2">
                        <button class="btn btn-primary downloadBtn" onclick="generatePDF('paymentSection', 'Payment_Report.pdf')">Download</button>
                    </div>
                </div>

            </div>
            
    </div>
    <div class="text-center mt-4">
        <button class="btn btn-secondary downloadBtn" style="margin-bottom: 20px;" onclick="generateFullReport()">Download Full Report</button>
    </div>
</div>


        <!-- Profile Management -->
        <div id="profile" class="content-section" style="display: none;">

            <div class="card profile-card p-4">
                <h2 class="text-center">Admin Profile Management</h2>

                <!-- Profile Image -->
                <div class="profile-image-container">
                    <img id="profileImage" src="avatar.png" class="profile-image" alt="Profile Image">
                    <span id="editProfileImage" class="edit-icon text-primary">
                        <i class="fas fa-edit"></i>
                    </span>
                </div>
                <input type="file" id="imageUpload" accept="image/*" class="d-none">

                <!-- Profile Information -->
                <form id="profileForm" class="mt-4">
                    <div class="mb-3 text-start">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" value="AdminUser" disabled>
                    </div>
                    <div class="mb-3 text-start">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" value="admin@mobi.comm" disabled>
                    </div>
                    <div class="mb-3 text-start">
                        <label class="form-label">Contact Number</label>
                        <input type="text" class="form-control" id="contact" value="+91 98745 48915">
                        <small class="text-danger d-none" id="contactError">Invalid contact number</small>
                    </div>
                    <div class="mb-3 text-start">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" id="address"></textarea>
                        <small class="text-danger d-none" id="addressError">Address cannot be empty</small>
                    </div>

                    <!-- Change Password Toggle -->
                    <div class="mb-3 text-start">
                        <button type="button" class="btn btn-outline-secondary w-100" id="togglePasswordFields">
                            Change Password
                        </button>
                    </div>

                    <!-- Password Fields (Initially Hidden) -->
                    <div id="passwordFields" style="display: none;">
                        <h5 class="text-start">Change Password</h5>
                        <div class="mb-3 text-start">
                            <label class="form-label">New Password</label>
                            <input type="password" class="form-control" id="newPassword">
                            <small class="text-danger d-none" id="passwordError">Password must be at least 6
                                characters</small>
                        </div>
                        <div class="mb-3 text-start">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmPassword">
                            <small class="text-danger d-none" id="confirmPasswordError">Passwords do not match</small>
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary w-100" id="updateProfile">Update Profile</button>
                </form>

                <!-- Toast Notification -->
                <div class="toast-container position-fixed top-0 end-0 p-3">
                    <div id="updateToast" class="toast align-items-center text-bg-success border-0" role="alert">
                        <div class="d-flex">
                            <div class="toast-body">
                                Profile updated successfully!
                            </div>
                            <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button onclick="scrollToTop()" id="scrollTopBtn" class="scroll-top-btn">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Footer -->
    <footer class="footer text-light py-5" id="contact">
        <div class="container">
            <div class="row">
                <!-- About Us Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>About Mobi.Comm</h5>
                    <p>We provide quick and secure mobile recharges for prepaid users. Our goal is to make recharge
                        services simple, efficient, and accessible.</p>
                </div>

                <!-- Quick Links Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light">Home</a></li>
                        <li><a href="offers.html" class="text-light">Available Offers</a></li>
                    </ul>
                </div>

                <!-- Contact Us Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Contact Us</h5>
                    <p><i class="fas fa-envelope me-2"></i>Email: <a href="mailto:support@mobi.comm"
                            class="text-li0ght">support@mobi.comm</a></p>
                    <p><i class="fas fa-phone me-2"></i>Phone: +1 234 567 890</p>
                    <p><i class="fas fa-map-marker-alt me-2"></i>123 Recharge Street, City, Country</p>
                </div>

                <!-- Social Media Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Connect with Us</h5>
                    <div class="social-icons d-flex">
                        <a href="#" class="me-3 text-light"><i class="fab fa-facebook-f fa-lg"></i></a>
                        <a href="#" class="me-3 text-light"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="me-3 text-light"><i class="fab fa-linkedin-in fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-instagram fa-lg"></i></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Copyright Section -->
        <div class="text-center py-3 footer-bottom">
            <p class="mb-0">&copy; 2025 Mobi.Comm - All Rights Reserved</p>
        </div>
    </footer>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>




    <script src="adminscript.js"></script>


</body>

</html>