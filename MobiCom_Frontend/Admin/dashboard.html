<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Mobi.Comm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showPage('dashboard')">Mobi.Comm</a>
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('dashboard')">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('subscribers')">Subscribers List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('recharge-history')">Transaction History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('plans')">Plans</a>
                    </li>
                </ul>
            </div>

            <div class="notification-icon" onclick="showPage('notification')">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notifBadge">3</span>
            </div>

            <div class="dropdown">
                <div class="avatar-icon" data-bs-toggle="dropdown" aria-expanded="false">
                    <img id="navbarAvatar" src="../assesst/Images/profile.jpeg" alt="Avatar" class="rounded-circle"
                        width="40" height="40" data-bs-toggle="tooltip" data-bs-title="Admin Name">
                </div>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#" onclick="showPage('profile')">Profile</a></li>
                    <li><a class="dropdown-item" href="#" onclick="showPage('reportAndAnalysis')">Report & Analysis</a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item text-danger" href="#" onclick="confirmLogout()">Logout</a>
                    </li>

                </ul>
            </div>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>


    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section">
            <h2 class="text-center mb-4">Dashboard</h2>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Total Subscribers</div>
                        <div class="card-body">
                            <p id="totalSubscribers"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Active Plans</div>
                        <div class="card-body">
                            <p id="activePlans"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Expiring Subscribers Count</div>
                        <div class="card-body">
                            <p id="expiringPlans"><b>0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-header">Revenue Generated</div>
                        <div class="card-body">
                            <p id="totalRevenue"><b>₹0</b></p>
                        </div>
                    </div>
                </div>
            </div>

            <h4 class="mt-4" style="text-align: center; margin-bottom: 20px;">Expiring Plans in 3 Days</h4>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Plan</th>
                            <th>Price(₹)</th>
                            <th>Validity</th>
                            <th>Recharge Date</th>
                            <th>Expiry Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="expiringSubscribersTable">
                    </tbody>
                </table>
            </div>

            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center" id="pagination">
                </ul>
            </nav>
            <p class="text-center text-muted" id="rangeInfo"></p>

            <!-- Notify Modal -->
            <div class="modal fade" id="notifyModal" tabindex="-1" aria-labelledby="notifyModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="notifyModalLabel">Plan Expiry Notification</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p><strong>Name:</strong> <span id="notifyUserName"></span></p>
                            <p><strong>Phone:</strong> <span id="notifyUserPhone"></span></p>
                            <p id="notifyMessage">User has been notified about their plan expiry.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subscriber Management Section -->
        <div id="subscribers" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Subscriber Management</h2>
            <div class="search-bar position-relative mb-3">
                <input type="text" class="form-control ps-5" id="searchSubscribers"
                    placeholder="Search Subscribers by Name | Mobile Number">
                <i class="fas fa-search position-absolute text-muted"
                    style="top: 50%; left: 15px; transform: translateY(-50%);"></i>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5 class="text-center">Subscriber Management</h5>
                    <div class="mb-3">
                        <label for="statusFilter" class="form-label">Filter by Status:</label>
                        <select id="statusFilter" class="form-select">
                            <option value="" selected>All</option>
                            <option value="PENDING">Pending</option>
                            <option value="ACTIVE">Active</option>
                            <option value="INACTIVE">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Mobile No.</th>
                                    <th>Aadhar Card</th>
                                    <th>Photo</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="subscriber-list">
                            </tbody>
                        </table>
                    </div>

                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination0"></ul>
                    </nav>
                    <div class="text-center mt-3">
                        <button id="exportCSV" class="btn btn-warning me-2" onclick="exportSubscribersToCSV()">Export to
                            CSV</button>
                        <button id="exportPDF" class="btn btn-warning" onclick="exportSubscribersToPDF()">Export to
                            PDF</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050;"></div>

        <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confirmationModalLabel">Confirmation</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="confirmText"></p>
                        <div id="confirmModalBody"></div>
                        <div id="deleteOptions" class="mt-3 text-center"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button id="confirmActionBtn" class="btn btn-success">Confirm</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="recharge-history" class="content-section">
            <h2 class="text-center mb-4">Transaction History</h2>

            <div class="search-bar position-relative mb-3">
                <input type="text" class="form-control ps-5" id="searchTransactions"
                    placeholder="Search by Name or Mobile">
                <i class="fas fa-search position-absolute text-muted"
                    style="top: 50%; left: 15px; transform: translateY(-50%);"></i>
            </div>
            <div class="filters mb-3">
                <div class="row">
                    <div class="col-md-3">
                        <label>Payment Status</label>
                        <select class="form-select" id="filterStatus">
                            <option value="">All Status</option>
                            <option value="SUCCESS">Success</option>
                            <option value="FAILED">Failed</option>
                            <option value="PENDING">Pending</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label>Payment Method</label>
                        <select class="form-select" id="filterPayment">
                            <option value="">All Methods</option>
                            <option value="UPI">UPI</option>
                            <option value="CARD">Card</option>
                            <option value="WALLET">Wallet</option>
                            <option value="NETBANKING">Net Banking</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label>Recharge Date From:</label>
                        <input type="date" class="form-control" id="filterDateFrom">
                    </div>
                    <div class="col-md-3">
                        <label>Recharge Date To:</label>
                        <input type="date" class="form-control" id="filterDateTo">
                    </div>
                </div>
                <div class="text-end mt-2">
                    <button class="btn btn-secondary" id="clearFiltersBtn">Clear Filters</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header text-center">
                    <h5>Recharge Transactions</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Transaction ID</th>
                                    <th>Recharge Date</th>
                                    <th>Subscriber Name</th>
                                    <th>Subscriber Number</th>
                                    <th>Plan Name</th>
                                    <th>Plan Price</th>
                                    <th>Plan Validity</th>
                                    <th>Payment Method</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="adminTransactionTable"></tbody>
                        </table>
                    </div>

                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination5"></ul>
                    </nav>

                    <div class="text-center mt-3">
                        <button class="btn btn-warning me-2" id="exportTransactionsToCSVBtn">Export to CSV</button>
                        <button class="btn btn-warning" id="exportTransactionsToPDFBtn">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>



        <!-- Plan Management -->
        <div id="plans" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Plan Management</h2>

            <div class="row g-4">
                <div class="col-md-3">
                    <input type="text" id="search-plan-name" class="form-control" placeholder="Search by Plan Name"
                        oninput="applyFilters()">
                </div>
                <div class="col-md-3">
                    <select id="filter-price" class="form-control" onchange="applyFilters()">
                        <option value="" selected>-- Order by Price --</option>
                        <option value="low-to-high">Price Low to High</option>
                        <option value="high-to-low">Price High to Low</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select id="filter-status" class="form-control" onchange="applyFilters()">
                        <option value="" selected>-- Select Status --</option>
                        <option value="ACTIVE">Active</option>
                        <option value="INACTIVE">Inactive</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select id="filter-category" class="form-control" onchange="applyFilters()">
                        <option value="" selected>-- Select Category --</option>

                    </select>
                </div>
                <div class="col-md-2 d-flex">
                    <button class="btn btn-secondary me-2" onclick="clearFilters()">Clear</button>
                    <button class="btn btn-primary w-50" data-bs-toggle="modal" data-bs-target="#addPlanModal"
                        onclick="openAddPlanModal()">+ Add Plan</button>
                </div>
            </div>

            <!-- Plans Table -->
            <div class="card mt-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Plans</h5>
                    <button class="btn btn-sm btn-primary" onclick="toggleView('categories')">
                        Manage Categories
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover" id="plans-table">
                            <thead>
                                <tr>
                                    <th>Plan Name</th>
                                    <th>Category</th>
                                    <th>Price (₹)</th>
                                    <th>Validity</th>
                                    <th>Data Limit</th>
                                    <th>SMS Limit</th>
                                    <th>Call Limit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination-plans">

                        </ul>
                    </nav>

                    <!-- Export Buttons -->
                    <div class="d-flex justify-content-center mt-4">
                        <button class="btn btn-warning mx-2" onclick="exportPlans()">Export to CSV</button>
                        <button class="btn btn-warning mx-2" onclick="exportPlanPDF()">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Management -->
        <div id="categories" class="content-section" style="display: none;">
            <h2 class="text-center mb-4">Category Management</h2>

            <div class="row g-4">
                <div class="col-md-8">
                    <input type="text" id="search-category-name" class="form-control"
                        placeholder="Search by Category Name" oninput="applyCategoryFilters()">
                </div>
                <div class="col-md-4 d-flex">
                    <button class="btn btn-secondary me-2" onclick="clearCategoryFilters()">Clear Filters</button>
                    <button class="btn btn-primary w-50" data-bs-toggle="modal" data-bs-target="#addCategoryModal"
                        onclick="openAddCategoryModal()">+ Add Category</button>
                </div>
            </div>

            <!-- Categories Table -->
            <div class="card mt-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Categories</h5>
                    <button class="btn btn-sm btn-primary" onclick="toggleView('plans')">
                        Manage Plans
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover" id="categories-table">
                            <thead>
                                <tr>
                                    <th>Category Name</th>
                                    <th>Number of Plans</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center" id="pagination-categories">

                        </ul>
                    </nav>

                    <!-- Export Buttons -->
                    <div class="d-flex justify-content-center mt-4">
                        <button class="btn btn-warning mx-2" onclick="exportCategories()">Export to CSV</button>
                        <button class="btn btn-warning mx-2" onclick="exportCategoryPDF()">Export to PDF</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Adding/Editing Plans -->
        <div class="modal fade" id="addPlanModal" tabindex="-1" aria-labelledby="addPlanModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addPlanModalLabel">Add Plan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="plan-form" onsubmit="handlePlanFormSubmit(event)">
                            <input type="hidden" id="plan-id">
                            <div class="mb-3">
                                <label for="plan-name" class="form-label">Plan Name</label>
                                <input type="text" class="form-control" id="plan-name" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-category" class="form-label">Category</label>
                                <select class="form-control" id="plan-category" required>

                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="plan-price" class="form-label">Price</label>
                                <input type="number" class="form-control" id="plan-price" step="0.01" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-validity" class="form-label">Validity</label>
                                <input type="text" class="form-control" id="plan-validity" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-data-limit" class="form-label">Data Limit</label>
                                <input type="text" class="form-control" id="plan-data-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-sms-limit" class="form-label">SMS Limit</label>
                                <input type="text" class="form-control" id="plan-sms-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-call-limit" class="form-label">Call Limit</label>
                                <input type="text" class="form-control" id="plan-call-limit" required>
                            </div>
                            <div class="mb-3">
                                <label for="plan-status" class="form-label">Status</label>
                                <select class="form-control" id="plan-status" required>
                                    <option value="ACTIVE">Active</option>
                                    <option value="INACTIVE">Inactive</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Save Plan</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Adding/Editing Categories -->
        <div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addCategoryModalLabel">Add Category</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="category-form" onsubmit="handleCategoryFormSubmit(event)">
                            <input type="hidden" id="category-id">
                            <div class="mb-3">
                                <label for="category-name" class="form-label">Category Name</label>
                                <input type="text" class="form-control" id="category-name" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Save Category</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Deleting/Deactivating Plans -->
        <div class="modal fade" id="deletePlanModal" tabindex="-1" aria-labelledby="deletePlanModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deletePlanModalLabel">Confirm Action</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>What would you like to do with this plan?</p>
                        <p><strong>Plan Name:</strong> <span id="delete-plan-name"></span></p>
                        <div id="delete-plan-details"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" onclick="confirmDeletePlan()">Delete</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Deleting/Deactivating Categories -->
        <div class="modal fade" id="deleteCategoryModal" tabindex="-1" aria-labelledby="deleteCategoryModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteCategoryModalLabel">Confirm Action</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>What would you like to do with this category?</p>
                        <p><strong>Category Name:</strong> <span id="delete-category-name"></span></p>
                        <div id="delete-category-details"></div>
                        <div class="alert alert-warning mt-3">
                            <strong>Warning:</strong> Deleting a category will affect all plans associated with it.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" onclick="confirmDeleteCategory()">Delete</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>






        <!-- Report & Analytics -->
        <div id="reportAndAnalysis" class="content-section" style="display: none;">
            <h2 class="text-center">Reports & Analytics</h2>

            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-header">Revenue Generated</div>
                        <div class="card-body">
                            <p id="totalRevenues"><b>₹0</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-header">Total Transaction Counnt</div>
                        <div class="card-body">
                            <p id="totalRecharge"></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-header">New Subscribers</div>
                        <div class="card-body">
                            <p id="newSubscribers"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <!-- Revenue Overview -->
                <div class="col-md-8 mx-auto" id="revenueSection">
                    <div class="card border-0 rounded-3 shadow-sm mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center py-2"
                            style="background-color: #00a095;">
                            <h5 class="mb-0 text-white fw-bold">Revenue Overview</h5>
                            <button class="btn btn-sm text-white downloadBtn" style="background-color: #0056b3;"
                                onclick="generatePDF('revenueSection', 'Revenue_Report.pdf')">Download</button>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart-container" style="position: relative; height:250px;">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Recharge -->
                <div class="col-md-8 mx-auto" id="rechargeSection">
                    <div class="card border-0 rounded-3 shadow-sm mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center py-2"
                            style="background-color: #00a095;">
                            <h5 class="mb-0 text-white fw-bold">Daily Recharge</h5>
                            <button class="btn btn-sm text-white downloadBtn" style="background-color: #0056b3;"
                                onclick="generatePDF('rechargeSection', 'Recharge_Report.pdf')">Download</button>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart-container" style="position: relative; height:250px;">
                                <canvas id="dailyRechargeChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recharge Plan Popularity -->
                <div class="col-md-8 mx-auto" id="planSection">
                    <div class="card border-0 rounded-3 shadow-sm mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center py-2"
                            style="background-color: #00a095;">
                            <h5 class="mb-0 text-white fw-bold">Recharge Plan Popularity</h5>
                            <button class="btn btn-sm text-white downloadBtn" style="background-color: #0056b3;"
                                onclick="generatePDF('planSection', 'Plan_Report.pdf')">Download</button>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart-container" style="position: relative; height:250px;">
                                <canvas id="rechargePlanChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Mode Usage -->
                <div class="col-md-8 mx-auto" id="paymentSection">
                    <div class="card border-0 rounded-3 shadow-sm mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center py-2"
                            style="background-color: #00a095;">
                            <h5 class="mb-0 text-white fw-bold">Payment Mode Usage</h5>
                            <button class="btn btn-sm text-white downloadBtn" style="background-color: #0056b3;"
                                onclick="generatePDF('paymentSection', 'Payment_Report.pdf')">Download</button>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart-container" style="position: relative; height:250px;">
                                <canvas id="paymentModeChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center my-4">
                <button class="btn btn-secondary downloadBtn py-2 px-4 rounded-3" onclick="generateFullReport()"
                    style="background-color: #6c757d;">
                    Download Full Report
                </button>
            </div>


        </div>
    </div>


    <!-- Profile Management -->
    <div id="profile" class="content-section" style="display: none;">

        <h2 class="text-center">Admin Profile Management</h2>
        <div class="card profile-card p-4 mx-auto">

            <div class="profile-image-container">
                <img id="profileImage" src="../assesst/Images/profile.jpeg" class="profile-image" alt="Profile Image">
                <span id="editProfileImage" class="edit-icon text-primary">
                    <i class="fas fa-edit"></i>
                </span>
            </div>
            <input type="file" id="imageUpload" accept="image/*" class="d-none">

            <form id="profileForm" class="mt-4">
                <div class="mb-3 text-start">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-control" id="username" readonly>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" readonly>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">Contact Number</label>
                    <input type="text" class="form-control" id="contact">
                    <small class="text-danger d-none" id="contactError">Invalid contact number</small>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">Address</label>
                    <textarea class="form-control" id="address"></textarea>
                    <small class="text-danger d-none" id="addressError">Address cannot be empty</small>
                </div>
                <div class="mb-3 text-start">
                    <button type="button" class="btn btn-outline-secondary w-100" id="togglePasswordFields">
                        Change Password
                    </button>
                </div>
                <div id="passwordFields" style="display: none;">
                    <h5 class="text-start">Change Password</h5>
                    <div class="mb-3 text-start">
                        <label class="form-label">New Password</label>
                        <input type="password" class="form-control" id="newPassword">
                        <small class="text-danger d-none" id="passwordError">Password must be at least 6
                            characters</small>
                    </div>
                    <div class="mb-3 text-start">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword">
                        <small class="text-danger d-none" id="confirmPasswordError">Passwords do not match</small>
                    </div>
                </div>

                <button type="button" class="btn btn-primary w-100" id="updateProfile">Update Profile</button>
            </form>
        </div>
    </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to logout?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id="confirmLogoutBtn" class="btn btn-danger">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button onclick="scrollToTop()" id="scrollTopBtn" class="scroll-top-btn">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Footer -->
    <footer class="footer text-light py-5" id="contact">
        <div class="container">
            <div class="row">
                <!-- About Us Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>About Mobi.Comm</h5>
                    <p>We provide quick and secure mobile recharges for prepaid users. Our goal is to make recharge
                        services simple, efficient, and accessible.</p>
                </div>

                <!-- Quick Links Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light">Home</a></li>
                        <li><a href="/Subscriber/offers.html" class="text-light">Available Offers</a></li>
                    </ul>
                </div>

                <!-- Contact Us Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Contact Us</h5>
                    <p><i class="fas fa-envelope me-2"></i>Email: <a href="mailto:support@mobi.comm"
                            class="text-li0ght">support@mobi.comm</a></p>
                    <p><i class="fas fa-phone me-2"></i>Phone: +91 85742 89562</p>
                    <p><i class="fas fa-map-marker-alt me-2"></i>2/3 Main Street - Salem, Tamil nadu</p>
                </div>

                <!-- Social Media Column -->
                <div class="col-md-3 mb-4 footer-column">
                    <h5>Connect with Us</h5>
                    <div class="social-icons d-flex">
                        <a href="#" class="me-3 text-light"><i class="fab fa-facebook-f fa-lg"></i></a>
                        <a href="#" class="me-3 text-light"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="me-3 text-light"><i class="fab fa-linkedin-in fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-instagram fa-lg"></i></a>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center py-3 footer-bottom">
            <p class="mb-0">&copy; 2025 Mobi.Comm - All Rights Reserved</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

    <script src="script.js"></script>


</body>

</html>